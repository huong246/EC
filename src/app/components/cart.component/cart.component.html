<div class="cart-container">
  <h2>Giỏ hàng của bạn</h2>

  @if (cartItems$ | async; as items) {

    @if (items.length > 0) {
      <table>
        <thead>
        <tr>
          <th>Sản phẩm</th>
          <th>Tên</th>
          <th>Đơn giá</th>
          <th>Số lượng</th>
          <th>Thành tiền</th>
          <th>Xóa</th>
        </tr>
        </thead>
        <tbody>
          @for (item of items; track item.id) {
            <tr>
              <td>
                <img [src]="item.item?.imageAvatarUrl" [alt]="item.item?.name" class="product-image">
              </td>
              <td>{{ item.item?.name }}</td>
              <td>{{ item.item?.price | currency:'VND' }}</td>
              <td>
                <input
                  type="number"
                  [value]="item.quantity"
                  min="1"
                  (change)="updateQuantity(item.id, $event)">
              </td>
              <td>{{ (item.quantity * (item.item?.price || 0)) | currency:'VND' }}</td>
              <td>
                <button (click)="removeItem(item.id)" class="btn-remove">Xóa</button>
              </td>
            </tr>
          }
        </tbody>
      </table>

      <div class="cart-summary">
<!--        <h3>Tổng cộng: {{  | async | currency:'VND' }}</h3>-->
        <button (click)="clearCart()" class="btn-clear-all">Xóa tất cả</button>
<!--        <button class="btn-checkout">Thanh toán</button>-->
      </div>
    } @else {
      <p>Giỏ hàng của bạn đang trống.</p>
    }

  } @else {
    <p>Đang tải giỏ hàng...</p>
  }
</div>
